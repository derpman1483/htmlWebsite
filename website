<!DOCTYPE html>
<html>
<head>
  <title>Cooper's Downloading Site</title>
</head>
<body>
<h1>Cooper's Downloading Site</h1>
  <textarea id="text"></textarea>
  <br />
  <button id="unhid" onclick="updateText('unhidden')">Download the unhidden malware</button>
  <button id="hid" onclick="updateText('hidden')">Download the hidden malware</button>
  <button id="click" onclick="updateText('clicker')">Download the clicker game</button>

  <script>
    function download(file, text) {
      let element = document.createElement('a');
      element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', file);
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    function updateText(name) {
      var url = "https://raw.githubusercontent.com/derpman1483/htmlWebsite/main/" + name;
      fetch(url)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.text();
        })
        .then(text => {
          // Use .value instead of .innerHTML for textarea
          document.getElementById('text').value = text;

          if (name == 'clicker') {
            downloader('clicker', 'clicker_Game.html');
          } else if (name == 'hidden') {
            downloader('hidden', 'gameV3.0.1.html');
          } else if (name == 'unhidden') {
            downloader('unhidden', 'test.html');
          }
        })
        .catch(error => {
          console.error('There was a problem fetching the text:', error);
        });
    }

    function downloader(name, filename) {
      let text = document.getElementById("text").value;
      download(filename, text);
    }
  </script>
</body>
</html>
